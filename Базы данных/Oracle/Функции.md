---
tags:
  - oracle
  - database
---
### dbms_rowid.rowid_create
#### принимает параметры

```sql
ROWID result = DBMS_ROWID.ROWID_CREATE( 
	rowid_type,
	object_number,
	relative_fno,
	block_number,
	row_number
	
	```
**Функция DBMS_ROWID.ROWID_CREATE** позволяет создать идентификатор строки (ROWID), задав его составные части в качестве параметров. Некоторые параметры:

- **rowid_type** — тип ROWID (ограниченный или расширенный):
    - **0** — для ограниченного ROWID; 
    - **1** — для создания расширенного ROWID. Если указать rowid_type как 0, то требуемый параметр object_number игнорируется, и ROWID_CREATE возвращает ограниченный ROWID.
- **object_number** — номер объекта данных (для ограниченного доступа); 
- **relative_fno** — относительный номер файла
- **block_number** — номер блока в этом файле; 
- **row_number** — номер строки в этом блоке
##### Запрос, что бы получить параметры
```sql
SELECT

data_object_id,

file_id,

relative_fno,

file_batch,

MIN (start_block_id) start_block_id,

MAX (end_block_id) end_block_id,

SUM (blocks) blocks

FROM

(SELECT

o.data_object_id,

e.file_id,

e.relative_fno,

e.block_id start_block_id,

e.block_id + e.blocks - 1 end_block_id,

e.blocks,

CEIL (SUM(e.blocks) OVER (PARTITION BY o.data_object_id, e.file_id ORDER BY e.block_id ASC) /

(SUM (e.blocks)OVER (PARTITION BY o.data_object_id,e.file_id) / 21)) file_batch

FROM

dba_extents e,

dba_objects o,

dba_tab_subpartitions tsp

WHERE

o.owner = 'SYS'

AND o.object_name = 'LARGE_DATA_TABLE'

AND e.owner = 'SYS'

AND e.segment_name = 'LARGE_DATA_TABLE'

AND o.owner = e.owner

AND o.object_name = e.segment_name

AND (o.subobject_name = e.partition_name

OR (o.subobject_name IS NULL

AND e.partition_name IS NULL))

AND o.owner = tsp.table_owner(+)

AND o.object_name = tsp.table_name(+)

AND o.subobject_name = tsp.subpartition_name(+))

GROUP BY

data_object_id,

file_id,

relative_fno,

file_batch

ORDER BY data_object_id,

file_id,

relative_fno,

file_batch
```